{% load pricing %}
<div class="container text-center" id="commissions">
    <h1 class="pricing-header mt-2 mb-2">commissions</h1>
    <div class="prices-container text-center">
        <h2 class="text-light">PORTRAITS MAKE GREAT GIFTS! <i class="fa fa-gift"></i> <i class="fa fa-smile"></i></h2>
         {% if meta.sale %}
        <h3 class="text-light">
            <strong style="color:rgb(50, 98, 231) ">{{meta.sale_amount|to_pretty_percent}}</strong> OFF UNTIL
            <strong style="color:red">{{meta.sale_end}}</strong>
        </h3>
        {% endif %}
        <h4>You can click on one of the items to add it to your cart!</h4>
        <table style="margin:2rem auto" class="m-0-auto table border-white table-striped">
            <thead class="thead-dark">
                <tr>
                    <th colspan="{{traditional_unique_num_subjects|length|add:1}}" class="text-uppercase">traditional drawing (pen &amp; paper) commissions</th>
                </tr>
                <tr>

                    <th>size</th>
                    <th colspan="{{traditional_unique_num_subjects|length}}">how many people?</th>
                </tr>
                <tr>
                    <th></th>
                    {% for ns in traditional_unique_num_subjects %}
                    <th>{{ns}}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody class="bg-light">
                {% for s in traditional_unique_sizes %}
                <tr>
                    <td>{{s}}</td>
                    {% for ns in traditional_unique_num_subjects %}
                    <td>
                        {% with price=s|get_traditional_price:ns %}
                            {% if sale %}
                                {% if user.is_authenticated %}
                                <button type="button" class="btn btn-dark" data-toggle="tooltip" data-placement="top" title="Add to cart" onclick="showAddToCartModal({type: 'traditional', numSubjects: '{{ns}}', size: '{{s}}', price: '{{price|on_sale:sale_amount}}'})">
                                    <strike style='color:red'>${{price}}</strike> ${{price|on_sale:sale_amount}}
                                </button>
                                {% else %}
                                    <strike style='color:red'>${{price}}</strike> ${{price|on_sale:sale_amount}}
                                {% endif %}
                            {% else %}
                                {% if user.is_authenticated %}
                                <button type="button" class="btn btn-dark" data-toggle="tooltip" data-placement="top" title="Add to cart" onclick="showAddToCartModal({type: 'traditional', numSubjects: '{{ns}}',  size: '{{s}}', price: '{{price}}'})">${{price}}</button>
                                {% else %}
                                ${{price}}
                                {% endif %}
                            {% endif %}
                        {% endwith %}
                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <table style="margin:2rem auto" class="m-0-auto table border-white table-striped">
            <thead class="thead-dark">
                <tr>
                    <th colspan="2" class="text-uppercase">digital drawing commissions</th>
                </tr>
                <tr>
                    <th class="text-uppercase">how many people?</th>
                    <th class="text-uppercase">price</th>
                </tr>
            </thead>
            <tbody class="bg-light">
                {% for ns in digital_unique_num_subjects %}
                    <tr>
                        <td>{{ns}}</td>
                        <td>
                            {% with price=ns|get_digital_price %}
                                {% if sale %}
                                    {% if user.is_authenticated %}
                                    <button type="button" class="btn btn-dark" data-toggle="tooltip" data-placement="top" title="Add to cart" onclick="showAddToCartModal({type: 'digital', numSubjects: '{{ns}}', price: '{{price|on_sale:sale_amount}}'})">
                                        <strike style='color:red'>${{price}}</strike> ${{price|on_sale:sale_amount}}
                                    </button>
                                    {% else %}
                                    <strike style='color:red'>${{price}}</strike> ${{price|on_sale:sale_amount}}
                                    {% endif %}
                                {% else %}
                                    {% if user.is_authenticated %}
                                        <button type="button" class="btn btn-dark" data-toggle="tooltip" data-placement="top" title="Add to cart" onclick="showAddToCartModal({type: 'digital', numSubjects: '{{ns}}', price: '{{price}}'})">
                                            ${{price}}
                                        </button>
                                    {% else %}
                                        ${{price}}
                                    {% endif %}
                                {% endif %}
                            {% endwith %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>

            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>
<style>
    .pricing-container {
        background: black;
        text-align: center;
        padding: 10px;
    }

    .pricing-header {
        color: white;
        font-size: 3em;
        font-weight: 600;
        text-decoration: underline;
    }

    .prices-container {
        padding: 10px;
        text-align: center;
    }

    .prices-container .price {
        font-size: 1.1em;
        font-weight: 400;
        line-height: 1;
        margin: 8px;
    }

    .price-description {
        color: white;
    }

    .price-description a {
        color: lightblue;
        font-size: 1.1em;
        font-weight: 400;
    }
</style>